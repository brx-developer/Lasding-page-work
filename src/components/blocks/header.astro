---
import BtnAnimated from "@components/buttons/btn-animated.astro";
---

<nav
  x-data="{ scrollPos: window.scrollY }"
  x-init="
    window.addEventListener('scroll', () => {
        scrollPos = window.scrollY;
    });
  "
  :class="{ 'shadow-md  md:!bg-opacity-90 md:-translate-y-0 opacity-100': scrollPos > 150  ,' !bg-opacity-100  md:-translate-y-full md:opacity-0': scrollPos < 150 }"
  class="duration fixed z-[99] mb-10 w-full -translate-y-0 !bg-white duration-300 md:-translate-y-full md:opacity-0 md:backdrop-blur-sm dark:bg-gray-900"
>
  <div
    class="duration container flex flex-wrap items-center justify-between p-4 *:z-50"
  >
    <div class="flex items-center space-x-3 *:z-50 rtl:space-x-reverse">
      <button
        data-collapse-toggle="navbar-cta"
        type="button"
        class="duration z-50 inline-flex size-6 items-center justify-center rounded-lg p-5 text-sm text-gray-500 hover:bg-gray-200 md:hidden md:size-10 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
        aria-controls="navbar-cta"
        aria-expanded="false"
      >
        <div
          x-data="{ showMenu: false }"
          class="flex h-full items-center justify-center"
        >
          <span
            @click="showMenu = true"
            :class="{ 'hidden': showMenu, 'text-gray-500': !showMenu }"
            class="icon-[mingcute--menu-fill] size-7 transition-all duration-300"
          ></span>

          <span
            @click="showMenu = false"
            :class="{ 'hidden': !showMenu, 'text-gray-500': showMenu }"
            class="icon-[mingcute--close-fill] size-7 transition-all duration-300"
          ></span>
        </div>
      </button>
      <a href="/" class="">
        <img
          draggable="false"
          src="/logo/logo.png"
          class="h-[1.9rem] md:h-[2.7rem]"
          alt="Logo"
        />
      </a>
    </div>

    <div class="flex space-x-3 md:order-2 md:space-x-0 rtl:space-x-reverse">
      <BtnAnimated title="Empezar" addClass="hidden sm:flex" />
    </div>
    <div
      class="hidden w-full items-center justify-between md:order-1 md:flex md:w-auto"
      id="navbar-cta"
    >
      <ul
        class="mt-4 flex flex-col rounded-lg bg-white p-4 font-medium md:mt-0 md:flex-row md:space-x-8 md:border-0 md:bg-transparent md:p-0 rtl:space-x-reverse dark:border-gray-700 dark:bg-gray-800 md:dark:bg-gray-900"
      >
        <li>
          <a
            href="#"
            class="duration block rounded bg-secondary px-3 py-2 text-white md:bg-transparent md:p-0 md:text-secondary md:dark:text-blue-500"
            aria-current="page">Inicio</a
          >
        </li>
        <li>
          <a
            href="#"
            class="duration block rounded px-3 py-2 text-gray-600 hover:bg-gray-200 md:p-0 md:hover:bg-transparent md:hover:text-secondary dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
          >
            Acerca de</a
          >
        </li>
        <li>
          <!-- Main Menu Item -->
          <div
            x-data="{ isOpen: false, openedWithKeyboard: false, leaveTimeout: null }"
            @mouseleave.prevent="leaveTimeout = setTimeout(() => { isOpen = false }, 100)"
            @mouseenter="leaveTimeout ? clearTimeout(leaveTimeout) : true"
            @keydown.esc.prevent="isOpen = false, openedWithKeyboard = false"
            @click.outside="isOpen = false, openedWithKeyboard = false"
            class="relative flex flex-col"
          >
            <div class="flex items-center justify-between pr-4">
              <!-- Link for Small Screens -->
              <a href="#" class="px-3 py-2 text-gray-600 md:hidden">
                Actions Menu
              </a>

              <!-- Toggle Button for Small Screens -->
              <button
                type="button"
                @click="isOpen = !isOpen"
                class="inline-flex items-center gap-2 text-gray-600 md:hidden"
                aria-expanded="isOpen"
                aria-haspopup="true"
              >
                <span class="icon-[solar--alt-arrow-down-line-duotone] size-5"
                ></span>
              </button>
            </div>

            <!-- Toggle Button for Large Screens -->
            <button
              type="button"
              @mouseover="isOpen = true"
              @keydown.space.prevent="openedWithKeyboard = true"
              @keydown.enter.prevent="openedWithKeyboard = true"
              @keydown.down.prevent="openedWithKeyboard = true"
              class="hidden items-center gap-2 whitespace-nowrap rounded font-medium text-gray-600 transition hover:bg-gray-200 hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800 md:inline-flex md:p-0 md:hover:bg-transparent md:hover:text-secondary dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white dark:focus-visible:outline-slate-300 md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
              :aria-expanded="isOpen || openedWithKeyboard"
              aria-haspopup="true"
            >
              <a href="#" class="flex items-center justify-between gap-1"
                >Actions Menu <span
                  class="icon-[iconamoon--arrow-down-2-duotone] size-5"
                ></span></a
              >
            </button>

            <!-- Dropdown Menu -->
            <div
              x-cloak
              x-show="isOpen || openedWithKeyboard"
              x-transition
              x-trap="openedWithKeyboard"
              @click.outside="isOpen = false, openedWithKeyboard = false"
              @keydown.down.prevent="$focus.wrap().next()"
              @keydown.up.prevent="$focus.wrap().previous()"
              class="left-0 top-11 z-10 ml-3 flex w-full min-w-[12rem] flex-col rounded-xl bg-gray-200 py-1.5 md:absolute md:bg-white md:bg-opacity-95 md:backdrop-blur-sm dark:border-slate-700 dark:bg-slate-800"
              role="menu"
            >
              <a
                href="#"
                class="duration px-4 py-2 text-sm text-secondary hover:text-primary focus-visible:outline-none dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-100/5 dark:hover:text-white dark:focus-visible:bg-slate-100/10 dark:focus-visible:text-white"
                role="menuitem">Subscription</a
              >
              <a
                href="#"
                class="duration px-4 py-2 text-sm text-secondary hover:text-primary focus-visible:outline-none dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-100/5 dark:hover:text-white dark:focus-visible:bg-slate-100/10 dark:focus-visible:text-white"
                role="menuitem">Settings</a
              >
              <!-- Sub Dropdown Menu -->
              <div
                x-data="{ isOpen: false, openedWithKeyboard: false, leaveTimeout: null }"
                @mouseleave.prevent="leaveTimeout = setTimeout(() => { isOpen = false }, 100)"
                @mouseenter="leaveTimeout ? clearTimeout(leaveTimeout) : true"
                @keydown.esc.prevent="isOpen = false, openedWithKeyboard = false"
                @click.outside="isOpen = false, openedWithKeyboard = false"
                class="relative flex flex-col after:absolute after:end-0 after:h-full after:w-1 after:translate-x-full after:translate-y-1 after:bg-transparent"
              >
                <div class="flex items-center justify-between pr-4">
                  <!-- Link for Small Screens -->
                  <a
                    href="#"
                    class="duration px-3 px-4 py-2 text-sm text-secondary hover:text-primary focus-visible:outline-none md:hidden dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-100/5 dark:hover:text-white dark:focus-visible:bg-slate-100/10 dark:focus-visible:text-white"
                  >
                    Actions Menu
                  </a>

                  <!-- Toggle Button for Small Screens -->
                  <button
                    type="button"
                    @click="isOpen = !isOpen"
                    class="inline-flex items-center gap-2 text-gray-600 md:hidden"
                    aria-expanded="isOpen"
                    aria-haspopup="true"
                  >
                    <span
                      class="icon-[solar--alt-arrow-down-line-duotone] size-5"
                    ></span>
                  </button>
                </div>

                <!-- Toggle Button for Large Screens -->
                <button
                  type="button"
                  @mouseover="isOpen = true"
                  @keydown.space.prevent="openedWithKeyboard = true"
                  @keydown.enter.prevent="openedWithKeyboard = true"
                  @keydown.down.prevent="openedWithKeyboard = true"
                  class="hidden items-center gap-2 whitespace-nowrap rounded font-medium text-gray-600 transition hover:bg-gray-200 hover:opacity-75 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-slate-800 md:inline-flex md:p-0 md:hover:bg-transparent md:hover:text-secondary dark:border-gray-700 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white dark:focus-visible:outline-slate-300 md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
                  :aria-expanded="isOpen || openedWithKeyboard"
                  aria-haspopup="true"
                >
                  <a
                    href="#"
                    class="duration flex w-full items-center justify-between gap-1 px-4 py-2 text-sm text-secondary hover:text-primary focus-visible:outline-none dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-100/5 dark:hover:text-white dark:focus-visible:bg-slate-100/10 dark:focus-visible:text-white"
                    >Actions Menu <span
                      class="icon-[iconamoon--arrow-down-2-duotone] size-5"
                    ></span></a
                  >
                </button>

                <!-- Dropdown Menu -->
                <div
                  x-cloak
                  x-show="isOpen || openedWithKeyboard"
                  x-transition
                  x-trap="openedWithKeyboard"
                  @click.outside="isOpen = false, openedWithKeyboard = false"
                  @keydown.down.prevent="$focus.wrap().next()"
                  @keydown.up.prevent="$focus.wrap().previous()"
                  class="left-0 top-7 z-20 ml-3 flex w-full min-w-[12rem] flex-col rounded-xl bg-gray-200 bg-opacity-100 py-1.5 md:absolute md:left-full md:top-0 md:ml-1 md:bg-white md:bg-opacity-95 md:backdrop-blur-sm dark:border-slate-700 dark:bg-slate-800"
                  role="menu"
                >
                  <a
                    href="#"
                    class="duration px-4 py-2 text-sm text-secondary hover:text-primary focus-visible:outline-none dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-100/5 dark:hover:text-white dark:focus-visible:bg-slate-100/10 dark:focus-visible:text-white"
                    role="menuitem">Dashboard</a
                  >
                  <a
                    href="#"
                    class="duration px-4 py-2 text-sm text-secondary hover:text-primary focus-visible:outline-none dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-100/5 dark:hover:text-white dark:focus-visible:bg-slate-100/10 dark:focus-visible:text-white"
                    role="menuitem">Subscription</a
                  >
                  <a
                    href="#"
                    class="duration px-4 py-2 text-sm text-secondary hover:text-primary focus-visible:outline-none dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-100/5 dark:hover:text-white dark:focus-visible:bg-slate-100/10 dark:focus-visible:text-white"
                    role="menuitem">Settings</a
                  >
                </div>
              </div>
            </div>
          </div>
        </li>
        <li>
          <a
            href="#"
            class="duration block rounded px-3 py-2 text-gray-600 hover:bg-gray-200 md:p-0 md:hover:bg-transparent md:hover:text-secondary dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
            >Servicios
          </a>
        </li>
        <li>
          <a
            href="#"
            class="duration block rounded px-3 py-2 text-gray-600 hover:bg-gray-200 md:p-0 md:hover:bg-transparent md:hover:text-secondary dark:border-gray-700 dark:text-white dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent md:dark:hover:text-blue-500"
            >Contacto
          </a>
        </li>
        <li>
          <BtnAnimated title="Empezar" addClass=" mt-3 block sm:hidden" />
        </li>
      </ul>
    </div>
  </div>
</nav>
